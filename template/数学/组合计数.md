# 组合计数

### 题型1：递推法

给定n个空，分别插入0和1，要求1和1之间最少有种方案。方法：DP，根据最后一位1的位置来划分集合。
$$
f[i]+=s[max(0,i-k-1)]
$$
其中s是f的前缀和，最终答案就是s[n]。

原公式推导
$$
if(i-k-1 \ge 0):f[i]+=f[i-k+1]\\
else: f[i]+=f[0];\\
ans=f[0]+f[1]+...+f[n]
$$


### 题型2：插空法

对于方程的解的分配问题等等,附上组合数递推需要写的加法高精度

```cpp
void add(int c[],int a[],int b[])
    for(int i=0,t=0;i<N;i++){
        t+=a[i]+b[i];
        c[i]=t%10;
        t/=10;
    }
```

引子：





延申：

给定三个正整数 N,L,R，统计长度在 1 到 N 之间，元素大小都在 L 到 R 之间的单调不降序列的数量。

输出答案对 106+3 取模的结果。

输入格式
输入第一行包含一个整数 T，表示数据组数。

第二到第 T+1 行每行包含三个整数 N,L,R。

输出格式
输出包含 T 行，每行有一个数字，表示你所求出的答案对 1e6+3 取模的结果。

数据范围
1≤N,L,R≤109,
1≤T≤100，
输入数据保证 L≤R。

输入样例：
2
1 4 5
2 4 5
输出样例：
2
5







### 加法原理&乘法原理

![image-20210822170631408](C:\Users\Henry\AppData\Roaming\Typora\typora-user-images\image-20210822170631408.png)
$$
C_{b}^{i} \cdot P_{a}^{i} \cdot C_{a+c-i}^{k-i} \cdot P_{d}^{k-i}
$$




### 组合数C{a}{b}                    排列数P{a}{b}



### Lucas卢卡斯定理

#### 

$$
C_{a}^{b} \equiv C_{a\ mod \ p}^{b\ mod \ p} \cdot \ C_{\frac{a}{p}}^{\frac{b}{p}} (mod\ p)
$$



```CPP
int lucas(ll a,ll b){
    if(a<p&&b<p) return C(a,b);

    int res= (ll)C(a%p,b%p)*lucas(a/p,b/p)%p;
    return res;
}
//C(a,b)即以a为底取b的组合数
```





### Catalam卡特兰数列

卡特兰数的定义：
$$
f(n)=\sum^{n−1}_{1}f(i)∗f(n−i)
$$
卡特兰数满足的性质：
$$
1.满足递推式：f(n)=f(1)f(n-1)+f(2)f(n-2)+...
$$

$$
2.满足在任意前缀里某个数的个数不少于另外一种数的个数
$$



#### 例题：

我们称一个长度为 2n 的数列是有趣的，当且仅当该数列满足以下三个条件：

```cpp
1. 它是从1到 2n 共 2n 个整数的一个排列 {a_i}；
2. 所有的奇数项满足 a1<a3<⋯<a2n−1所有的偶数项满足 a2<a4<⋯<a2n
3. 任意相邻的两项 a2i−1 与 a2ia2i (1≤i≤n) 满足奇数项小于偶数项即：a2i−1<a2i。
```

任务是：对于给定的 n，请求出有多少个不同的长度为 2n的有趣的数列。

因为最后的答案可能很大，所以只要求输出答案 mod P 的值。
$$
考虑1~-~n的自然数，对于前n个数，需要任意前缀中保证选奇数的数量大于选偶数的数量，因此符合卡特兰数的定义规则
$$
